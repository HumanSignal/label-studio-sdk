imports:
  root: __package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    reset_token:
      path: /api/invite/reset-token
      method: POST
      auth: true
      docs: >-
        Reset the token used in the invitation link to invite someone to an
        organization.
      source:
        openapi: openapi/openapi.yaml
      display-name: Reset organization token
      response:
        docs: ''
        type: root.OrganizationInvite
      examples:
        - response:
            body:
              token: token
              invite_url: invite_url
      audiences:
        - public
    list:
      path: /api/organizations/
      method: GET
      auth: true
      docs: |2-

                Return a list of the organizations you've created or that you have access to.
                
      source:
        openapi: openapi/openapi.yaml
      display-name: List your organizations
      request:
        name: OrganizationsListRequest
        query-parameters:
          ordering:
            type: optional<string>
            docs: Which field to use when ordering the results.
      response:
        docs: ''
        type: list<root.OrganizationId>
      examples:
        - response:
            body:
              - id: 1
                title: title
                contact_info: contact_info
                created_at: '2024-01-15T09:30:00Z'
      audiences:
        - public
    get:
      path: /api/organizations/{id}
      method: GET
      auth: true
      docs: Retrieve the settings for a specific organization by ID.
      source:
        openapi: openapi/openapi.yaml
      path-parameters:
        id: integer
      display-name: Get organization settings
      response:
        docs: ''
        type: root.LseOrganization
      examples:
        - path-parameters:
            id: 1
          response:
            body:
              id: 1
              external_id: external_id
              title: title
              token: token
              default_role: OW
              created_at: '2024-01-15T09:30:00Z'
              billing:
                manual_workspace_management: manual_workspace_management
                manual_role_management: manual_role_management
              embed_domains:
                key: value
              embed_settings:
                key: value
              custom_scripts_enabled: custom_scripts_enabled
              custom_scripts_editable_by: AD
              email_notification_settings: email_notification_settings
      audiences:
        - public
    api_organizations_partial_update:
      path: /api/organizations/{id}
      method: PATCH
      auth: true
      docs: >-
        Update organization details including title, embed domains, and custom
        scripts settings.
      source:
        openapi: openapi/openapi.yaml
      path-parameters:
        id: integer
      display-name: Update organization
      request:
        name: PatchedLseOrganizationSerializerUpdateRequest
        body:
          properties:
            title:
              type: optional<string>
              validation:
                minLength: 1
            embed_domains: optional<list<map<string, string>>>
            custom_scripts_enabled: optional<boolean>
            custom_scripts_editable_by:
              type: optional<string>
              validation:
                minLength: 1
            embed_settings: optional<unknown>
            email_notification_settings: optional<unknown>
            token:
              type: optional<string>
              validation:
                maxLength: 256
            contact_info:
              type: optional<string>
              validation:
                format: email
                maxLength: 254
            created_by: optional<integer>
        content-type: application/json
      response:
        docs: ''
        type: root.LseOrganization
      errors:
        - root.BadRequestError
        - root.ForbiddenError
        - root.NotFoundError
      examples:
        - path-parameters:
            id: 1
          request: {}
          response:
            body:
              id: 1
              external_id: external_id
              title: title
              token: token
              default_role: OW
              created_at: '2024-01-15T09:30:00Z'
              billing:
                manual_workspace_management: manual_workspace_management
                manual_role_management: manual_role_management
              embed_domains:
                key: value
              embed_settings:
                key: value
              custom_scripts_enabled: custom_scripts_enabled
              custom_scripts_editable_by: AD
              email_notification_settings: email_notification_settings
    api_organizations_memberships_list:
      path: /api/organizations/{id}/memberships
      method: GET
      auth: true
      docs: Retrieve a list of all users and roles in a specific organization.
      source:
        openapi: openapi/openapi.yaml
      path-parameters:
        id:
          type: integer
          docs: A unique integer value identifying this organization.
      display-name: Get organization members/roles
      request:
        name: ApiOrganizationsMembershipsListRequest
        query-parameters:
          exclude_project_id:
            type: optional<integer>
            docs: >-
              Project ID to exclude users who are already associated with this
              project (direct members, workspace members, or implicit
              admin/owner access).
          exclude_workspace_id:
            type: optional<integer>
            docs: >-
              Workspace ID to exclude users who are already associated with this
              workspace (direct workspace members or implicit admin/owner
              access).
          ordering:
            type: optional<string>
            docs: Which field to use when ordering the results.
          page:
            type: optional<integer>
            docs: A page number within the paginated result set.
          page_size:
            type: optional<integer>
            docs: Number of results to return per page.
          search:
            type: optional<string>
            docs: A search term.
      response:
        docs: ''
        type: root.PaginatedLseOrganizationMemberListList
      examples:
        - path-parameters:
            id: 1
          response:
            body:
              count: 123
              next: http://api.example.org/accounts/?page=4
              previous: http://api.example.org/accounts/?page=2
              results:
                - id: 1
                  organization: 1
                  user:
                    id: 1
                    username: username
                    last_activity: '2024-01-15T09:30:00Z'
                    avatar: avatar
                    initials: initials
                    lse_fields:
                      invite_expired: invite_expired
                      invite_expired_at: invite_expired_at
                      email_notification_settings: email_notification_settings
                    pause: pause
                    created_projects: created_projects
                    contributed_to_projects: contributed_to_projects
                  role: role
    api_organizations_memberships_create:
      path: /api/organizations/{id}/memberships
      method: POST
      auth: true
      docs: |2-

            Assign a role to a user in an organization. To do so, make the following cURL request:

            ```bash
            curl -H 'Content-Type: application/json' -H 'Authorization: Token abc123' \
            -X POST 'https://label-studio-host/api/organizations/{{id}}/memberships' --data '[{{"user_id": Int, "role": "NO|DI|OW|AD|MA|AN|RE" }}]'
            ```
            
            Enumerate a role with one of the following abbreviations:

            | Role | Full Role Name |
            | --- | --- |
            | NO | Not Activated |
            | DI | Deactivated |
            | OW | Owner |
            | AD | Administrator |
            | MA | Manager |
            | AN | Annotator |
            | RE | Reviewer |

            For example, to set a user with an ID of 9 as an annotator, make the following cURL request:
            ```bash
            curl -H 'Content-Type: application/json' -H 'Authorization: Token abc123' \
            -X POST 'https://label-studio-host/api/organizations/{{id}}/memberships' --data '[{{"user_id": 9, "role": "AN" }}]'
            ```
            
      source:
        openapi: openapi/openapi.yaml
      path-parameters:
        id:
          type: integer
          docs: A unique integer value identifying this organization.
      display-name: Create organization member/role
      request:
        name: OrganizationMemberCreateUpdateRequest
        body:
          properties:
            user_id: integer
            role: root.Role9E7Enum
        content-type: application/json
      response:
        docs: ''
        type: root.LseOrganizationMemberList
      examples:
        - path-parameters:
            id: 1
          request:
            user_id: 1
            role: OW
          response:
            body:
              id: 1
              organization: 1
              user:
                id: 1
                first_name: first_name
                last_name: last_name
                username: username
                email: email
                last_activity: '2024-01-15T09:30:00Z'
                custom_hotkeys:
                  key: value
                avatar: avatar
                initials: initials
                phone: phone
                active_organization: 1
                allow_newsletters: true
                date_joined: '2024-01-15T09:30:00Z'
                lse_fields:
                  invite_expired: invite_expired
                  invite_expired_at: invite_expired_at
                  invited_at: '2024-01-15T09:30:00Z'
                  invite_activated: true
                  trial_company: trial_company
                  trial_role: annotator
                  trial_models_in_production: trial_models_in_production
                  trial_experience_labeling: trial_experience_labeling
                  trial_license_enterprise: true
                  social_auth_finished: true
                  invited_by: 1
                  onboarding_state: not_started
                  email_notification_settings: email_notification_settings
                pause: pause
                created_projects: created_projects
                contributed_to_projects: contributed_to_projects
              role: role
    api_organizations_memberships_partial_update:
      path: /api/organizations/{id}/memberships
      method: PATCH
      auth: true
      docs: |2-

            Update organization membership or role for a specific user ID.

            **User Rotation Best Practices for API Usage**
            
            To maintain compliance with our licensing terms and ensure optimal performance of HumanSignal's APIs, please consider the following guidelines when managing user assignments:
            
            * **Maintain a 7-Day Minimum Assignment**: Once a licensed seat is assigned to a user, maintain that assignment for at least seven consecutive days before rotating it to another user.

            * **Automate, Monitor, and Log Rotations**: Implement automated scheduling and logging mechanisms to track the timing of user rotations. This helps ensure that rotations adhere to the seven-day minimum period.

            * **Adhere to API Update Frequency and Wait Periods**: When updating user assignments via our APIs, follow the recommended frequency and wait period guidelines provided in the HumanSignal API documentation. Avoid sending rapid, successive requests that might overload the endpoint. Instead, incorporate appropriate delays between calls as specified in the documentation.
            
            * **Avoid Overloading the API Endpoint**: Design your integration to batch or schedule updates where possible, and implement backoff strategies if the API indicates rate limiting. This helps prevent service disruptions and ensures a smooth operation.
            
      source:
        openapi: openapi/openapi.yaml
      path-parameters:
        id:
          type: integer
          docs: A unique integer value identifying this organization.
      display-name: Update organization member/role
      request:
        name: PatchedOrganizationMemberCreateUpdateRequest
        body:
          properties:
            user_id: optional<integer>
            role: optional<root.Role9E7Enum>
        content-type: application/json
      response:
        docs: ''
        type: root.LseOrganizationMemberList
      examples:
        - path-parameters:
            id: 1
          request: {}
          response:
            body:
              id: 1
              organization: 1
              user:
                id: 1
                first_name: first_name
                last_name: last_name
                username: username
                email: email
                last_activity: '2024-01-15T09:30:00Z'
                custom_hotkeys:
                  key: value
                avatar: avatar
                initials: initials
                phone: phone
                active_organization: 1
                allow_newsletters: true
                date_joined: '2024-01-15T09:30:00Z'
                lse_fields:
                  invite_expired: invite_expired
                  invite_expired_at: invite_expired_at
                  invited_at: '2024-01-15T09:30:00Z'
                  invite_activated: true
                  trial_company: trial_company
                  trial_role: annotator
                  trial_models_in_production: trial_models_in_production
                  trial_experience_labeling: trial_experience_labeling
                  trial_license_enterprise: true
                  social_auth_finished: true
                  invited_by: 1
                  onboarding_state: not_started
                  email_notification_settings: email_notification_settings
                pause: pause
                created_projects: created_projects
                contributed_to_projects: contributed_to_projects
              role: role
    api_organizations_set_default_role_partial_update:
      path: /api/organizations/{id}/set-default-role
      method: PATCH
      auth: true
      docs: Update the default role for members of a specific organization.
      source:
        openapi: openapi/openapi.yaml
      path-parameters:
        id: integer
      display-name: Update default role
      request:
        name: PatchedDefaultRoleRequest
        body:
          properties:
            organization:
              type: optional<integer>
              docs: A unique integer value identifying this organization.
            default_role:
              type: optional<root.DefaultRoleEnum>
              docs: |-
                Default membership role for invited users

                * `OW` - Owner
                * `AD` - Administrator
                * `MA` - Manager
                * `RE` - Reviewer
                * `AN` - Annotator
                * `DI` - Deactivated
                * `NO` - Not Activated
            external_id:
              type: optional<string>
              docs: External ID to uniquely identify this organization
            embed_domains: optional<unknown>
            embed_settings: optional<unknown>
            extra_data_on_activity_logs: optional<boolean>
            custom_scripts_enabled_at:
              type: optional<datetime>
              docs: >-
                Set to current time to enabled custom scripts for this
                organization. Can only be enabled if no organization members are
                active members of any other organizations; otherwise an error
                will be raised. If this occurs, contact the LEAP team for
                assistance with enabling custom scripts.
            custom_scripts_editable_by:
              type: optional<PatchedDefaultRoleRequestCustomScriptsEditableBy>
              docs: >-
                Set the minimum user role that can edit custom scripts in the
                UI.


                * `AD` - Administrator

                * `MA` - Manager
            annotator_reviewer_firewall_enabled_at:
              type: optional<datetime>
              docs: >-
                Set to current time to restrict data sharing between annotators
                and reviewers in the label stream, review stream, and
                notifications (which will be disabled). In these settings,
                information about annotator and reviewer identity is suppressed
                in the UI.
            read_only_quick_view_enabled_at:
              type: optional<datetime>
              docs: >-
                Set to current time to prevent creating or editing annotations
                in quick view.
            label_stream_navigation_disabled_at:
              type: optional<datetime>
              docs: >-
                Set to current time to disable the label stream navigation for
                this organization. This will prevent users from going back in
                the label stream to view previous labels.
            email_notification_settings: optional<unknown>
        content-type: application/json
      response:
        docs: ''
        type: root.DefaultRole
      examples:
        - path-parameters:
            id: 1
          request: {}
          response:
            body:
              organization: 1
              default_role: OW
              external_id: external_id
              embed_domains:
                key: value
              embed_settings:
                key: value
              extra_data_on_activity_logs: true
              custom_scripts_enabled_at: '2024-01-15T09:30:00Z'
              custom_scripts_editable_by: AD
              annotator_reviewer_firewall_enabled_at: '2024-01-15T09:30:00Z'
              read_only_quick_view_enabled_at: '2024-01-15T09:30:00Z'
              label_stream_navigation_disabled_at: '2024-01-15T09:30:00Z'
              email_notification_settings:
                key: value
  source:
    openapi: openapi/openapi.yaml
types:
  PatchedDefaultRoleRequestCustomScriptsEditableBy:
    discriminated: false
    docs: |-
      Set the minimum user role that can edit custom scripts in the UI.

      * `AD` - Administrator
      * `MA` - Manager
    union:
      - root.CustomScriptsEditableByEnum
      - root.NullEnum
    source:
      openapi: openapi/openapi.yaml
    inline: true
