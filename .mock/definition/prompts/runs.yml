types:
  RunsListRequestProjectSubset:
    enum:
      - All
      - HasGT
      - Sample
    source:
      openapi: openapi/openapi.yaml
imports:
  root: ../__package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    list:
      path: /api/prompts/{prompt_id}/versions/{version_id}/inference-runs
      method: GET
      auth: true
      docs: Get information (status, metadata, etc) about an existing inference run
      source:
        openapi: openapi/openapi.yaml
      path-parameters:
        prompt_id: integer
        version_id: integer
      display-name: Get inference run info
      request:
        name: RunsListRequest
        query-parameters:
          ordering:
            type: optional<string>
            docs: Which field to use when ordering the results.
          parent_model:
            type: optional<integer>
            docs: The ID of the parent model for this Inference Run
          project:
            type: optional<integer>
            docs: The ID of the project this Inference Run makes predictions on
          project_subset:
            type: optional<RunsListRequestProjectSubset>
            docs: >-
              Defines which tasks are operated on (e.g. HasGT will only operate
              on tasks with a ground truth annotation, but All will operate on
              all records)
      response:
        docs: ''
        type: list<root.ModelRun>
      examples:
        - path-parameters:
            prompt_id: 1
            version_id: 1
          response:
            body:
              - id: 1
                parent_model: 1
                project_subset: All
                status: Pending
                job_id: job_id
                total_predictions: 1
                total_correct_predictions: 1
                total_tasks: 1
                created_at: '2024-01-15T09:30:00Z'
                triggered_at: '2024-01-15T09:30:00Z'
                predictions_updated_at: '2024-01-15T09:30:00Z'
                completed_at: '2024-01-15T09:30:00Z'
                organization: 1
                project: 1
                model_version: 1
                created_by: 1
      audiences:
        - public
    create:
      path: /api/prompts/{prompt_id}/versions/{version_id}/inference-runs
      method: POST
      auth: true
      docs: Run a prompt inference.
      source:
        openapi: openapi/openapi.yaml
      path-parameters:
        prompt_id: integer
        version_id: integer
      display-name: Run prompt inference
      request:
        name: ModelRunRequest
        body:
          properties:
            project_subset: optional<root.ProjectSubsetEnum>
            job_id:
              type: optional<string>
              docs: Job ID for inference job for a ModelRun e.g. Adala job ID
              validation:
                maxLength: 255
            total_predictions:
              type: optional<integer>
              validation:
                min: -2147483648
                max: 2147483647
            total_correct_predictions:
              type: optional<integer>
              validation:
                min: -2147483648
                max: 2147483647
            total_tasks:
              type: optional<integer>
              validation:
                min: -2147483648
                max: 2147483647
            predictions_updated_at: optional<datetime>
            organization: optional<integer>
            project: integer
            model_version: integer
        content-type: application/json
      response:
        docs: ''
        type: root.ModelRun
      examples:
        - path-parameters:
            prompt_id: 1
            version_id: 1
          request:
            project: 1
            model_version: 1
          response:
            body:
              id: 1
              parent_model: 1
              project_subset: All
              status: Pending
              job_id: job_id
              total_predictions: 1
              total_correct_predictions: 1
              total_tasks: 1
              created_at: '2024-01-15T09:30:00Z'
              triggered_at: '2024-01-15T09:30:00Z'
              predictions_updated_at: '2024-01-15T09:30:00Z'
              completed_at: '2024-01-15T09:30:00Z'
              organization: 1
              project: 1
              model_version: 1
              created_by: 1
      audiences:
        - public
  source:
    openapi: openapi/openapi.yaml
