# This file was auto-generated by Fern from our API Definition.

from label_studio_sdk import Organization
from label_studio_sdk.client import AsyncLabelStudio, LabelStudio

from .utilities import validate_response


async def test_api_organizations_list(client: LabelStudio, async_client: AsyncLabelStudio) -> None:
    expected_response = [{"id": 1, "title": "title", "contact_info": "contact_info"}]
    expected_types = ("list", {0: {"id": "integer", "title": None, "contact_info": None}})
    response = client.organizations.api_organizations_list()
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.organizations.api_organizations_list()
    validate_response(async_response, expected_response, expected_types)


async def test_api_organizations_read(client: LabelStudio, async_client: AsyncLabelStudio) -> None:
    expected_response = {
        "id": 1,
        "title": "title",
        "token": "token",
        "created_at": "2024-01-15T09:30:00Z",
        "updated_at": "2024-01-15T09:30:00Z",
        "contact_info": "contact_info",
        "created_by": 1,
        "users": [1],
    }
    expected_types = {
        "id": "integer",
        "title": None,
        "token": None,
        "created_at": "datetime",
        "updated_at": "datetime",
        "contact_info": None,
        "created_by": "integer",
        "users": ("list", {0: "integer"}),
    }
    response = client.organizations.api_organizations_read(id=1)
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.organizations.api_organizations_read(id=1)
    validate_response(async_response, expected_response, expected_types)


async def test_api_organizations_partial_update(client: LabelStudio, async_client: AsyncLabelStudio) -> None:
    expected_response = {
        "id": 1,
        "title": "title",
        "token": "token",
        "created_at": "2024-01-15T09:30:00Z",
        "updated_at": "2024-01-15T09:30:00Z",
        "contact_info": "contact_info",
        "created_by": 1,
        "users": [1],
    }
    expected_types = {
        "id": "integer",
        "title": None,
        "token": None,
        "created_at": "datetime",
        "updated_at": "datetime",
        "contact_info": None,
        "created_by": "integer",
        "users": ("list", {0: "integer"}),
    }
    response = client.organizations.api_organizations_partial_update(id=1, request=Organization(title="title"))
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.organizations.api_organizations_partial_update(
        id=1, request=Organization(title="title")
    )
    validate_response(async_response, expected_response, expected_types)


async def test_api_organizations_memberships_list(client: LabelStudio, async_client: AsyncLabelStudio) -> None:
    expected_response = {
        "count": 1,
        "next": "next",
        "previous": "previous",
        "results": [{"id": 1, "organization": 1, "user": {"username": "username"}}],
    }
    expected_types = {
        "count": "integer",
        "next": None,
        "previous": None,
        "results": ("list", {0: {"id": "integer", "organization": "integer", "user": {"username": None}}}),
    }
    response = client.organizations.api_organizations_memberships_list(id="id")
    validate_response(response, expected_response, expected_types)

    async_response = await async_client.organizations.api_organizations_memberships_list(id="id")
    validate_response(async_response, expected_response, expected_types)


async def test_api_organizations_memberships_delete(client: LabelStudio, async_client: AsyncLabelStudio) -> None:
    # Type ignore to avoid mypy complaining about the function not being meant to return a value
    assert client.organizations.api_organizations_memberships_delete(id="id", user_pk=1) is None  # type: ignore[func-returns-value]

    assert await async_client.organizations.api_organizations_memberships_delete(id="id", user_pk=1) is None  # type: ignore[func-returns-value]
